<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Complete Programming & Full Stack Development ‚Äî Mind Map</title>
  <style>
    :root{
      --bg:#f8fafc;
      --card:#ffffff;
      --muted:#6b7280;
      --accent-1:#06b6d4; /* cyan */
      --accent-2:#f59e0b; /* yellow */
      --accent-3:#3b82f6; /* blue */
      --accent-4:#10b981; /* green */
      --accent-5:#ef4444; /* red */
      --accent-6:#8b5cf6; /* purple */
      --accent-7:#6366f1; /* indigo */
      --accent-8:#f472b6; /* pink */
      --shadow: 0 6px 18px rgba(15,23,42,0.08);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,body{
      height:100%;
      margin:0;
      background: linear-gradient(135deg,#f0f9ff 0%, #f7f3ff 50%, #fff0f6 100%);
      color:#111827;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .page {
      padding:28px;
      box-sizing:border-box;
      min-height:100vh;
    }

    .container{
      max-width:1200px;
      margin:0 auto;
    }

    header.card{
      background:var(--card);
      border-radius:12px;
      padding:20px;
      box-shadow:var(--shadow);
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:20px;
    }

    header .title{
      font-size:20px;
      font-weight:700;
      display:flex;
      gap:12px;
      align-items:center;
    }
    header p{
      margin:6px 0 0 0;
      color:var(--muted);
    }

    /* Mindmap body: horizontal flow */
    .mindmap {
      display:flex;
      gap:24px;
      align-items:flex-start;
      overflow:auto;
      padding-bottom:40px;
    }

    .root-card{
      min-width:260px;
      background:var(--card);
      border-radius:12px;
      padding:18px;
      box-shadow:var(--shadow);
      flex-shrink:0;
    }
    .root-card h1{
      margin:0 0 6px 0;
      font-size:18px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .root-card p{ margin:0; color:var(--muted) }

    /* Branch column */
    .branch {
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:flex-start;
      padding-left:28px;
      position:relative;
    }

    /* vertical connector line from root to branches */
    .branch::before{
      content:"";
      position:absolute;
      left:12px;
      top:10px;
      bottom:10px;
      width:2px;
      background:linear-gradient(#e6eef6, #e9d8fd);
      border-radius:2px;
      opacity:0.9;
    }

    /* Node card */
    .node {
      background:var(--card);
      border-radius:10px;
      padding:12px 14px;
      box-shadow: 0 4px 12px rgba(15,23,42,0.06);
      min-width:220px;
      cursor:pointer;
      display:flex;
      gap:10px;
      align-items:center;
      border-left:6px solid transparent;
    }
    .node .meta{
      display:flex;
      flex-direction:column;
    }
    .node .name{
      font-weight:700;
      font-size:14px;
    }
    .node .sub{
      font-size:12px;
      color:var(--muted);
      margin-top:2px;
    }

    .node .chev{
      margin-left:auto;
      display:inline-flex;
      width:22px;
      height:22px;
      align-items:center;
      justify-content:center;
      border-radius:6px;
      background:rgba(0,0,0,0.03);
      flex-shrink:0;
    }

    .children {
      display:flex;
      gap:20px;
      margin-top:8px;
    }

    /* when children stack vertically in the column */
    .childrenColumn {
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-left:42px; /* visual offset for nested levels */
      position:relative;
    }

    .childrenColumn::before{
      content:"";
      position:absolute;
      left:-24px;
      top:6px;
      bottom:6px;
      width:2px;
      background:linear-gradient(#e6eef6, #e9d8fd);
      border-radius:2px;
      opacity:0.9;
    }

    /* topic chip list used for leaf topic lists */
    .topics{
      margin-top:8px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .chip{
      background:#f8fafc;
      padding:6px 8px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(15,23,42,0.03);
    }

    /* color left border for categories */
    .c-cyan{ border-left-color:var(--accent-1) }
    .c-yellow{ border-left-color:var(--accent-2) }
    .c-blue{ border-left-color:var(--accent-3) }
    .c-green{ border-left-color:var(--accent-4) }
    .c-red{ border-left-color:var(--accent-5) }
    .c-purple{ border-left-color:var(--accent-6) }
    .c-indigo{ border-left-color:var(--accent-7) }
    .c-pink{ border-left-color:var(--accent-8) }

    /* small screens */
    @media (max-width:900px){
      .mindmap { flex-direction:column; gap:16px; }
      .branch::before{ display:none; }
      .children{ flex-wrap:wrap; }
    }

    .hint{
      margin-top:12px;
      font-size:13px;
      color:var(--muted);
    }

    /* small chevron rotation when expanded */
    .node.expanded .chev { transform: rotate(90deg) }
    .node.expanded .chev { transition: transform .18s ease }
  </style>
</head>
<body>
  <div class="page">
    <div class="container">
      <header class="card">
        <div style="font-size:28px;line-height:1">üìò</div>
        <div>
          <div class="title">Complete Programming & Full Stack Development Mind Map</div>
          <p>Click any topic to expand/collapse. Horizontal layout ‚Äî branches flow to the right.</p>
        </div>
      </header>

      <main class="mindmap" id="mindmapRoot" role="tree"></main>

      <p class="hint">Tip: open on desktop for the best horizontal layout. On small screens it stacks vertically.</p>
    </div>
  </div>

  <script>
    /* ====== Data (converted from your React object) ====== */
    const mindMapData = {
      name: "Complete Programming & Full Stack Development",
      icon: "üìò",
      children: [
        {
          name: "Full Stack Development",
          color: "c-cyan",
          icon: "üåê",
          children: [
            {
              name: "Frontend Development",
              children: [
                { name: "HTML", topics: ["Semantic HTML","HTML5 Elements","Forms & Input Types","Tables","Lists","Multimedia (audio, video)","Canvas & SVG","Meta Tags & SEO","Accessibility (ARIA)","IFrames"] },
                { name: "CSS", topics: ["Selectors","Box Model","Flexbox","CSS Grid","Responsive Design","Media Queries","Animations","CSS Variables","Z-index","Preprocessors (SASS)"] },
                { name: "CSS Frameworks", topics: ["Bootstrap","Tailwind CSS","Material-UI","Bulma","Foundation","Ant Design","Chakra UI"] },
                { name: "JavaScript (Browser)", topics: ["DOM Manipulation","Event Handling","Browser APIs","Fetch API","Local Storage","Service Workers","WebSockets"] },
                { name: "Frontend Frameworks/Libraries", topics: ["React.js","Vue.js","Angular","Svelte","Next.js","Nuxt.js","Gatsby"] },
                { name: "State Management", topics: ["Redux","Zustand","MobX","Context API","Recoil","XState"] },
                { name: "Build Tools", topics: ["Webpack","Vite","Parcel","Rollup","esbuild","Babel","npm/yarn/pnpm"] },
                { name: "Testing (Frontend)", topics: ["Jest","React Testing Library","Cypress","Playwright","Vitest","E2E Testing"] }
              ]
            },
            {
              name: "Backend Development",
              children: [
                { name:"Node.js", topics:["Node.js Basics","Event Loop","Modules","File System","Streams","Process & Child Processes"] },
                { name:"Express.js", topics:["Routing","Middleware","Error Handling","Static Files","Session Management","File Upload (Multer)"] },
                { name:"Other Backend Frameworks", topics:["Nest.js","Koa.js","Fastify","Django","Flask","FastAPI","Spring Boot","Laravel","Ruby on Rails"] },
                { name:"RESTful APIs", topics:["HTTP Methods","Status Codes","Versioning","Rate Limiting","Pagination","Swagger"] },
                { name:"GraphQL", topics:["Queries","Mutations","Subscriptions","Schema","Resolvers","Apollo"] },
                { name:"Auth & Authorization", topics:["JWT","OAuth 2.0","Passport.js","bcrypt","2FA","RBAC"] },
                { name:"API Security", topics:["HTTPS","CORS","CSRF","XSS Prevention","Parameterized Queries"] }
              ]
            },
            {
              name: "Databases",
              children: [
                { name:"SQL Databases", topics:["MySQL","PostgreSQL","SQLite","SQL Server","Oracle","MariaDB"] },
                { name:"SQL Concepts", topics:["Schemas","Primary/Foreign Keys","JOINs","Indexes","Transactions","ACID","Normalization"] },
                { name:"NoSQL", topics:["MongoDB","Cassandra","Redis","DynamoDB","Firestore","Neo4j"] },
                { name:"ORMs", topics:["Sequelize","Mongoose","TypeORM","Prisma","Knex.js"] },
                { name:"Design", topics:["ER Diagrams","Indexing","Migrations","Backup & Recovery"] }
              ]
            },
            {
              name: "DevOps & Deployment",
              children: [
                { name:"Version Control", topics:["Git","Branching","Pull Requests","GitHub","GitLab"] },
                { name:"Containerization", topics:["Docker","Docker Compose","Images","Volumes"] },
                { name:"Orchestration", topics:["Kubernetes","Helm","Pods","Services"] },
                { name:"CI/CD", topics:["GitHub Actions","Jenkins","GitLab CI","Travis"] },
                { name:"Cloud", topics:["AWS","GCP","Azure","Vercel","Netlify","Heroku"] },
                { name:"Monitoring", topics:["Prometheus","Grafana","Sentry","ELK"] },
                { name:"Web Servers", topics:["Nginx","Apache","Reverse Proxy","CDN"] }
              ]
            },
            {
              name: "Web Performance",
              children: [
                { name:"Frontend Performance", topics:["Lazy Loading","Code Splitting","Image Optimization","Lighthouse","Service Workers"] },
                { name:"Backend Performance", topics:["Caching","Query Optimization","Load Balancing","Connection Pooling"] }
              ]
            },
            {
              name: "Web Security",
              children: [
                { name:"Common Vulnerabilities", topics:["XSS","CSRF","SQL Injection","DDoS"] },
                { name:"Best Practices", topics:["Input Validation","CSP","HTTPS","OWASP Top 10"] }
              ]
            },
            { name: "Real-time Communication", topics:["WebSockets","Socket.io","SSE","WebRTC","Push Notifications"] },
            { name: "API Documentation", topics:["Swagger/OpenAPI","Postman","Insomnia","ReDoc"] },
            { name: "Microservices", topics:["Service Discovery","API Gateway","Event-Driven","CQRS","Saga Pattern"] },
            { name: "Message Queues", topics:["RabbitMQ","Kafka","Redis Pub/Sub","AWS SQS"] },
            { name: "Serverless", topics:["AWS Lambda","Azure Functions","Google Cloud Functions","Serverless Framework"] }
          ]
        },
        {
          name: "JavaScript",
          color: "c-yellow",
          icon: "üíª",
          children: [
            { name:"Basics", topics:["Variables","Data Types","Operators","Template Literals"] },
            { name:"Control Flow", topics:["if/else","switch","loops","break & continue"] },
            { name:"Functions", topics:["Function Declaration","Arrow Functions","Callbacks","Higher-Order Functions"] },
            { name:"Objects & Arrays", topics:["Object Literals","Array Methods","Destructuring","Spread/Rest"] },
            { name:"Advanced", topics:["Closures","Hoisting","Prototypes","Classes"] },
            { name:"Async", topics:["Callbacks","Promises","async/await","Event Loop"] },
            { name:"DOM", topics:["Selecting Elements","Event Listeners","Form Handling"] },
            { name:"ES6+", topics:["let/const","Modules","Promises","Map/Set"] },
            { name:"Error Handling", topics:["try/catch","throw","Custom Errors"] },
            { name:"JSON & Storage", topics:["JSON.parse","localStorage","sessionStorage","Cookies"] }
          ]
        },
        {
          name: "React",
          color: "c-blue",
          icon: "‚öõÔ∏è",
          children: [
            { name:"Basics", topics:["JSX","Components","Props","State","Create React App","Vite"] },
            { name:"Components", topics:["Functional","Class","Lifecycle","Composition"] },
            { name:"Hooks", topics:["useState","useEffect","useContext","useReducer","Custom Hooks"] },
            { name:"State Mgmt", topics:["Context API","Redux","Zustand","Recoil"] },
            { name:"Routing", topics:["React Router","Routes","Link","Nested Routes"] },
            { name:"Forms", topics:["Controlled","Uncontrolled","Validation","Formik","React Hook Form"] },
            { name:"Patterns", topics:["HOCs","Render Props","Code Splitting","Error Boundaries"] },
            { name:"Performance", topics:["React.memo","useMemo","Profiler"] },
            { name:"Testing", topics:["Jest","React Testing Library"] },
            { name:"Build & Deploy", topics:["Prod Build","Env Variables","Vercel","Netlify"] }
          ]
        },
        {
          name: "Python",
          color: "c-green",
          icon: "üêç",
          children: [
            { name:"Basics", topics:["Variables","Data Types","PEP8","Input/Output"] },
            { name:"Control Flow", topics:["if/elif/else","loops","break & continue"] },
            { name:"Data Structures", topics:["Lists","Tuples","Dicts","Sets"] },
            { name:"Functions", topics:["args/kwargs","Lambda","Decorators","Generators"] },
            { name:"OOP", topics:["Classes","Inheritance","Magic Methods"] },
            { name:"Modules & Packages", topics:["pip","venv","import","__init__"] },
            { name:"File Handling", topics:["open","read/write","CSV","JSON"] },
            { name:"Advanced", topics:["Async/Await","Threading","Multiprocessing"] },
            { name:"Libraries", topics:["NumPy","Pandas","Matplotlib","Flask","Django"] }
          ]
        },
        {
          name: "Java",
          color: "c-red",
          icon: "‚òï",
          children: [
            { name:"Basics", topics:["JDK/JRE/JVM","Syntax","Data Types"] },
            { name:"Control Flow", topics:["if/else","switch","loops"] },
            { name:"OOP in Java", topics:["Classes","Constructors","Inheritance","Polymorphism"] },
            { name:"Collections", topics:["List","Map","Set","Queue"] },
            { name:"Multithreading", topics:["Thread","Synchronization","ExecutorService"] },
            { name:"Advanced", topics:["Generics","Streams","Reflection","Annotations"] }
          ]
        },
        {
          name: "Data Structures",
          color: "c-purple",
          icon: "üóÑÔ∏è",
          children: [
            { name:"Arrays", topics:["1D/2D Arrays","Operations","Complexity"] },
            { name:"Linked Lists", topics:["Singly/Doubly/Circular","Traversal","Insertion/Deletion"] },
            { name:"Stacks", topics:["Push/Pop","Applications"] },
            { name:"Queues", topics:["Enqueue/Dequeue","Priority Queue"] },
            { name:"Trees", topics:["Binary Trees","BST","Traversals","AVL"] },
            { name:"Graphs", topics:["Adjacency List/Matrix","BFS/DFS","Shortest Paths"] },
            { name:"Hashing", topics:["Hash Tables","Collision Resolution"] },
            { name:"Heaps", topics:["Min/Max Heap","Heapify"] },
            { name:"Advanced", topics:["Segment Trees","Fenwick Tree"] }
          ]
        },
        {
          name: "Algorithms",
          color: "c-pink",
          icon: "üß†",
          children: [
            { name:"Sorting", topics:["Bubble","Merge","Quick","Heap","Counting"] },
            { name:"Searching", topics:["Linear","Binary","Jump"] },
            { name:"Recursion", topics:["Base Case","Stack","Backtracking"] },
            { name:"Dynamic Programming", topics:["Memoization","Tabulation","Knapsack"] },
            { name:"Greedy", topics:["Activity Selection","Huffman"] },
            { name:"Graph Algorithms", topics:["Dijkstra","Kruskal","Prim"] },
            { name:"Strings", topics:["KMP","Rabin-Karp","Anagram"] },
            { name:"Complexity", topics:["Big O","Space/Time"] }
          ]
        },
        {
          name: "OOP Concepts",
          color: "c-indigo",
          icon: "üìö",
          children: [
            { name:"Principles", topics:["Classes","Objects","Attributes","Methods"] },
            { name:"Encapsulation", topics:["Access Modifiers","Getters/Setters"] },
            { name:"Inheritance", topics:["Base/Derived","super","MRO"] },
            { name:"Polymorphism", topics:["Overloading","Overriding"] },
            { name:"Abstraction", topics:["Abstract Classes","Interfaces"] },
            { name:"Design Patterns", topics:["Singleton","Factory","Adapter","Observer"] }
          ]
        }
      ]
    };

    /* ====== Render logic ====== */
    const rootEl = document.getElementById('mindmapRoot');

    function createNodeElement(nodeObj, level=0) {
      const item = document.createElement('div');
      item.className = 'node';
      if (nodeObj.color) item.classList.add(nodeObj.color);
      item.setAttribute('role','treeitem');
      item.setAttribute('aria-expanded','false');

      // icon
      const iconSpan = document.createElement('div');
      iconSpan.textContent = nodeObj.icon || 'üìÅ';
      iconSpan.style.fontSize = '18px';
      iconSpan.style.lineHeight = '1';
      item.appendChild(iconSpan);

      // meta
      const meta = document.createElement('div');
      meta.className = 'meta';
      const name = document.createElement('div');
      name.className = 'name';
      name.textContent = nodeObj.name;
      meta.appendChild(name);

      if (nodeObj.topics && nodeObj.topics.length) {
        const sub = document.createElement('div');
        sub.className = 'sub';
        sub.textContent = nodeObj.topics.length + ' topics';
        meta.appendChild(sub);
      } else if (nodeObj.children && nodeObj.children.length) {
        const sub = document.createElement('div');
        sub.className = 'sub';
        sub.textContent = nodeObj.children.length + ' sections';
        meta.appendChild(sub);
      } else {
        const sub = document.createElement('div');
        sub.className = 'sub';
        sub.textContent = '';
        meta.appendChild(sub);
      }
      item.appendChild(meta);

      // chevron
      const chev = document.createElement('div');
      chev.className = 'chev';
      chev.innerHTML = nodeObj.children && nodeObj.children.length ? '‚ñ∂' : '';
      item.appendChild(chev);

      return item;
    }

    function renderTree(container, nodeObj, depth=0) {
      // For first level: render root card + branch column
      if (depth === 0) {
        // root node card
        const rootCard = document.createElement('div');
        rootCard.className = 'root-card';
        rootCard.innerHTML = \`
          <h1>\${nodeObj.icon || 'üìò'} \${nodeObj.name}</h1>
          <p>Click nodes to expand. This is a horizontal mind map ‚Äî branches move to the right.</p>
        \`;
        container.appendChild(rootCard);

        // build main branch column containing top-level children
        const branchCol = document.createElement('div');
        branchCol.className = 'branch';
        branchCol.setAttribute('role','group');
        container.appendChild(branchCol);

        // each top-level child becomes a vertical item in the branch
        nodeObj.children.forEach(child => {
          const childColumn = createBranchColumn(child, 1);
          branchCol.appendChild(childColumn);
        });

        return;
      }
    }

    function createBranchColumn(nodeObj, depth=1) {
      // wrapper for a top-level child (a column)
      const wrapper = document.createElement('div');
      wrapper.style.display = 'flex';
      wrapper.style.flexDirection = 'column';
      wrapper.style.alignItems = 'flex-start';
      wrapper.style.minWidth = '260px';
      wrapper.style.flexShrink = '0';

      const nodeEl = createNodeElement(nodeObj, depth);
      wrapper.appendChild(nodeEl);

      // If it has children: create container to the right that holds them in a vertical stack
      if (nodeObj.children && nodeObj.children.length) {
        const childrenWrap = document.createElement('div');
        childrenWrap.className = 'childrenColumn';
        childrenWrap.style.marginTop = '8px';
        childrenWrap.style.marginLeft = '12px';
        childrenWrap.style.paddingLeft = '18px';

        // Initially collapsed
        childrenWrap.style.display = 'none';

        nodeObj.children.forEach(child => {
          // Each child may itself be a parent with its own nested children or a leaf with topics
          const childBlock = document.createElement('div');
          childBlock.style.display = 'flex';
          childBlock.style.flexDirection = 'column';
          childBlock.style.gap = '6px';

          const childNode = createNodeElement(child, depth+1);
          childNode.style.minWidth = '220px';

          childBlock.appendChild(childNode);

          if (child.topics && child.topics.length) {
            const topicsDiv = document.createElement('div');
            topicsDiv.className = 'topics';
            child.topics.forEach(t => {
              const chip = document.createElement('div');
              chip.className = 'chip';
              chip.textContent = t;
              topicsDiv.appendChild(chip);
            });
            childBlock.appendChild(topicsDiv);
          } else if (child.children && child.children.length) {
            // recursively create nested column for deeper children
            const nested = document.createElement('div');
            nested.className = 'childrenColumn';
            nested.style.display = 'none';
            nested.style.marginLeft = '18px';
            nested.style.marginTop = '6px';
            nested.style.paddingLeft = '14px';
            child.children.forEach(grand => {
              const grandBlock = document.createElement('div');
              grandBlock.style.display = 'flex';
              grandBlock.style.flexDirection = 'column';
              grandBlock.style.gap = '6px';

              const grandNode = createNodeElement(grand, depth+2);
              grandBlock.appendChild(grandNode);

              if (grand.topics && grand.topics.length) {
                const gTopics = document.createElement('div');
                gTopics.className = 'topics';
                grand.topics.forEach(t2 => {
                  const chip2 = document.createElement('div');
                  chip2.className = 'chip';
                  chip2.textContent = t2;
                  gTopics.appendChild(chip2);
                });
                grandBlock.appendChild(gTopics);
              } else if (grand.children && grand.children.length) {
                // For extremely deep nesting, simply show count (keeps DOM reasonable)
                const placeholder = document.createElement('div');
                placeholder.className = 'sub';
                placeholder.textContent = grand.children.length + ' sections';
                grandBlock.appendChild(placeholder);
              }

              nested.appendChild(grandBlock);

              // make grandNode toggle nested display
              grandNode.addEventListener('click', (ev) => {
                ev.stopPropagation();
                const isShown = nested.style.display === 'flex' || nested.style.display === 'block';
                nested.style.display = isShown ? 'none' : 'flex';
                grandNode.classList.toggle('expanded', !isShown);
                grandNode.setAttribute('aria-expanded', String(!isShown));
              });
            });

            childBlock.appendChild(nested);

            // attach toggle to childNode to open nested
            childNode.addEventListener('click', (ev) => {
              ev.stopPropagation();
              const isShown = nested.style.display === 'flex' || nested.style.display === 'block';
              nested.style.display = isShown ? 'none' : 'flex';
              childNode.classList.toggle('expanded', !isShown);
              childNode.setAttribute('aria-expanded', String(!isShown));
            });
          }

          childrenWrap.appendChild(childBlock);

          // attach toggle: when clicking child node, toggle childrenWrap or topics
          childNode.addEventListener('click', (ev) => {
            ev.stopPropagation();
            // If child has topics (leaf) do nothing but maybe open a small reveal ‚Äî for now toggle topics display
            if (child.topics && child.topics.length) {
              const topicsEl = Array.from(childBlock.querySelectorAll('.topics'))[0];
              if (topicsEl) {
                const isShown = topicsEl.style.display !== 'none';
                topicsEl.style.display = isShown ? 'none' : 'flex';
                childNode.classList.toggle('expanded', !isShown);
                childNode.setAttribute('aria-expanded', String(!isShown));
              }
            }
          });

        });

        // clicking the parent node toggles visibility of childrenWrap
        nodeEl.addEventListener('click', (ev) => {
          ev.stopPropagation();
          const isShown = childrenWrap.style.display === 'flex' || childrenWrap.style.display === 'block';
          childrenWrap.style.display = isShown ? 'none' : 'flex';
          nodeEl.classList.toggle('expanded', !isShown);
          nodeEl.setAttribute('aria-expanded', String(!isShown));
        });

        wrapper.appendChild(childrenWrap);
      } else if (nodeObj.topics && nodeObj.topics.length) {
        // leaf node: show topics inline collapsible
        const topicsDiv = document.createElement('div');
        topicsDiv.className = 'topics';
        topicsDiv.style.display = 'none';
        topicsDiv.style.marginTop = '10px';
        nodeObj.topics.forEach(t => {
          const chip = document.createElement('div');
          chip.className = 'chip';
          chip.textContent = t;
          topicsDiv.appendChild(chip);
        });

        nodeEl.addEventListener('click', (ev) => {
          ev.stopPropagation();
          const isShown = topicsDiv.style.display !== 'none';
          topicsDiv.style.display = isShown ? 'none' : 'flex';
          nodeEl.classList.toggle('expanded', !isShown);
          nodeEl.setAttribute('aria-expanded', String(!isShown));
        });

        wrapper.appendChild(topicsDiv);
      }

      return wrapper;
    }

    // Render main structure
    renderTree(rootEl, mindMapData, 0);

    // Accessibility: keyboard navigation (basic)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        // collapse all expanded nodes
        document.querySelectorAll('.node.expanded').forEach(n => {
          n.classList.remove('expanded');
          n.setAttribute('aria-expanded','false');
          // hide adjacent childrenColumn if present
          const next = n.parentElement.querySelector('.childrenColumn');
          if (next) next.style.display = 'none';
          const topics = n.parentElement.querySelector('.topics');
          if (topics) topics.style.display = 'none';
        });
      }
    });

    // After DOM is ready, create top-level branch columns already (renderTree did this).
    // Optional: expand first-level children by default
    // const firstChildren = document.querySelectorAll('.branch > div > .childrenColumn');
    // firstChildren.forEach(c => c.style.display = 'flex');

  </script>
</body>
</html>
